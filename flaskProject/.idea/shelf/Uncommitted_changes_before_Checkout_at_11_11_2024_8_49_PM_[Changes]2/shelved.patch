Index: app.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from flask import Flask\r\nfrom flask import render_template\r\nfrom flask import request\r\nfrom flaskProject.database.database import create_database\r\nfrom flask import session, flash\r\nfrom flask import Flask, redirect\r\nfrom flaskProject.database.user import create_user, check_user\r\n\r\n\r\n\r\n# muudatus\r\napp = Flask(__name__)\r\napp.secret_key = 'your_secret_key'\r\nwith app.app_context():\r\n    create_database()\r\n\r\n@app.route('/')\r\ndef index():\r\n    return render_template('index.html')\r\n\r\n@app.route('/profiiliseaded')\r\ndef profiiliseaded():\r\n    return render_template('profiiliseaded.html')\r\n\r\n@app.route('/enda_konto')\r\ndef enda_konto():\r\n    return render_template('enda_konto.html')\r\n\r\n@app.route('/signup', methods=[\"POST\"])\r\ndef signup():\r\n    name = request.form.get('name')\r\n    password = request.form.get('password')\r\n    create_user(name, password)\r\n    user_id = check_user(name, password)\r\n    if user_id:\r\n        session['user_id'] = user_id\r\n        session['username'] = name\r\n        flash(\"User created\")\r\n        return redirect(\"/\")\r\n    flash(\"Couldn't create user\")\r\n    return redirect(\"/\")\r\n\r\n\r\n@app.route('/login', methods=[\"POST\"])\r\ndef login():\r\n    name = request.form.get('name')\r\n    password = request.form.get('password')\r\n    user_id = check_user(name, password)\r\n    if user_id:\r\n        session['user_id'] = user_id\r\n        session['username'] = name\r\n        flash(\"Login successful\")\r\n        return redirect(\"/\")\r\n    flash('Invalid credentials')\r\n    return redirect(\"/\")\r\n\r\n\r\n@app.route('/logout')\r\ndef logout():\r\n    session.pop('user_id', None)\r\n    session.pop('username', None)\r\n    flash('Logged out')\r\n    return redirect(\"/\")\r\n\r\n\r\n@app.route('/history')\r\ndef history():\r\n    # Your code here\r\n    pass\r\n\r\n@app.route('/sisselogimine')\r\ndef sisselogimine():\r\n    return render_template('sisselogimine.html')\r\n\r\n@app.route('/registreerimine')\r\ndef registreerimine():\r\n    return render_template('registreerimine.html')\r\n\r\n\r\napp.secret_key = 'your_secret_key'\r\n\r\nif __name__ == '__main__':\r\n    app.run()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app.py b/app.py
--- a/app.py	(revision 0e593b46ba452056e56fe87265aa3ec40e4dfe34)
+++ b/app.py	(date 1731350961721)
@@ -4,15 +4,11 @@
 from flaskProject.database.database import create_database
 from flask import session, flash
 from flask import Flask, redirect
-from flaskProject.database.user import create_user, check_user
 
+from flaskProject.database.user import create_user
 
-
-# muudatus
 app = Flask(__name__)
-app.secret_key = 'your_secret_key'
-with app.app_context():
-    create_database()
+
 
 @app.route('/')
 def index():
@@ -26,58 +22,18 @@
 def enda_konto():
     return render_template('enda_konto.html')
 
+# app.config.from_object('config:Config')
+with app.app_context(): # must be in application context to execute
+    create_database()
+
+
 @app.route('/signup', methods=["POST"])
 def signup():
     name = request.form.get('name')
     password = request.form.get('password')
     create_user(name, password)
-    user_id = check_user(name, password)
-    if user_id:
-        session['user_id'] = user_id
-        session['username'] = name
-        flash("User created")
-        return redirect("/")
-    flash("Couldn't create user")
-    return redirect("/")
-
-
-@app.route('/login', methods=["POST"])
-def login():
-    name = request.form.get('name')
-    password = request.form.get('password')
-    user_id = check_user(name, password)
-    if user_id:
-        session['user_id'] = user_id
-        session['username'] = name
-        flash("Login successful")
-        return redirect("/")
-    flash('Invalid credentials')
     return redirect("/")
 
 
-@app.route('/logout')
-def logout():
-    session.pop('user_id', None)
-    session.pop('username', None)
-    flash('Logged out')
-    return redirect("/")
-
-
-@app.route('/history')
-def history():
-    # Your code here
-    pass
-
-@app.route('/sisselogimine')
-def sisselogimine():
-    return render_template('sisselogimine.html')
-
-@app.route('/registreerimine')
-def registreerimine():
-    return render_template('registreerimine.html')
-
-
-app.secret_key = 'your_secret_key'
-
 if __name__ == '__main__':
     app.run()
\ No newline at end of file
